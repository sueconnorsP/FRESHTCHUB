{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import ReactMarkdown from\"react-markdown\";import\"./App.newoneuse.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[input,setInput]=useState(\"\");const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(false);const chatEndRef=useRef(null);useEffect(()=>{if(chatEndRef.current){chatEndRef.current.scrollIntoView({behavior:\"smooth\"});}},[messages]);const sendMessage=async()=>{if(!input.trim()||loading)return;await sendMessageWithPrompt(input);};const sendMessageWithPrompt=async text=>{const newMessages=[...messages,{role:\"user\",content:text}];setMessages([...newMessages,{role:\"assistant\",content:\"Typing...\",typing:true}]);setInput(\"\");setLoading(true);try{const response=await fetch(\"/ask\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:text})});const data=await response.json();setMessages([...newMessages,{role:\"assistant\",content:data.response||\"No response available.\",source:data.source||null// optional source\n}]);}catch(err){console.error(\"Error sending message:\",err);setMessages([...newMessages,{role:\"assistant\",content:\"Sorry, there was an error retrieving the answer.\"}]);}finally{setLoading(false);}};const handleKeyDown=e=>{if(e.key===\"Enter\"&&!loading){e.preventDefault();sendMessage();}};const clearChat=()=>{setMessages([]);};const promptOptions=[\"What programs are available?\",\"How do I apply?\",\"Where is the job board?\"];return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Builders Life TalentCentral Assistant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"intro\",children:\"Your one-stop destination for construction jobs and career support in BC. Whether you're just starting out, changing careers, or looking to grow in the construction industry, we connect you with job opportunities, training programs, and resources from the British Columbia Construction Association (BCCA) and its partners. Start here to explore the tools and support you need to build your future in construction.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"prompt-bubble\",children:promptOptions.map((prompt,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setInput(prompt);sendMessageWithPrompt(prompt);},disabled:loading,children:prompt},index))}),messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`message ${msg.role}`,children:msg.role===\"assistant\"?/*#__PURE__*/_jsx(\"div\",{className:msg.typing?\"typing\":\"\",children:msg.typing?/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{children:\".\"}),/*#__PURE__*/_jsx(\"span\",{children:\".\"}),/*#__PURE__*/_jsx(\"span\",{children:\".\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ReactMarkdown,{children:msg.content}),msg.source&&/*#__PURE__*/_jsxs(\"div\",{className:\"source-tag\",children:[\"Source: \",msg.source]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"user-message\",children:msg.content})},index)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ask the Assistant about jobs, training programs, or how to apply...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,disabled:loading,children:loading?\"Sending...\":\"Send\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"clear-btn\",onClick:clearChat,disabled:loading,children:\"Clear Chat\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactMarkdown","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","input","setInput","messages","setMessages","loading","setLoading","chatEndRef","current","scrollIntoView","behavior","sendMessage","trim","sendMessageWithPrompt","text","newMessages","role","content","typing","response","fetch","method","headers","body","JSON","stringify","message","data","json","source","err","console","error","handleKeyDown","e","key","preventDefault","clearChat","promptOptions","className","children","map","prompt","index","onClick","disabled","msg","ref","type","placeholder","value","onChange","target","onKeyDown"],"sources":["C:/Users/sue.connors/FreshTCHUB/client/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport \"./App.newoneuse.css\";\r\n\r\nfunction App() {\r\n  const [input, setInput] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const chatEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (chatEndRef.current) {\r\n      chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim() || loading) return;\r\n    await sendMessageWithPrompt(input);\r\n  };\r\n\r\n  const sendMessageWithPrompt = async (text) => {\r\n    const newMessages = [...messages, { role: \"user\", content: text }];\r\n    setMessages([\r\n      ...newMessages,\r\n      { role: \"assistant\", content: \"Typing...\", typing: true }\r\n    ]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"/ask\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ message: text })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      setMessages([\r\n        ...newMessages,\r\n        {\r\n          role: \"assistant\",\r\n          content: data.response || \"No response available.\",\r\n          source: data.source || null // optional source\r\n        }\r\n      ]);\r\n    } catch (err) {\r\n      console.error(\"Error sending message:\", err);\r\n      setMessages([\r\n        ...newMessages,\r\n        { role: \"assistant\", content: \"Sorry, there was an error retrieving the answer.\" }\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && !loading) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const clearChat = () => {\r\n    setMessages([]);\r\n  };\r\n\r\n  const promptOptions = [\r\n    \"What programs are available?\",\r\n    \"How do I apply?\",\r\n    \"Where is the job board?\"\r\n  ];\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <h1>Builders Life TalentCentral Assistant</h1>\r\n\r\n      <p className=\"intro\">\r\n        Your one-stop destination for construction jobs and career support in BC.\r\n        Whether you're just starting out, changing careers, or looking to grow in the\r\n        construction industry, we connect you with job opportunities, training\r\n        programs, and resources from the British Columbia Construction Association\r\n        (BCCA) and its partners. Start here to explore the tools and support you need\r\n        to build your future in construction.\r\n      </p>\r\n\r\n      <div className=\"chat-box\">\r\n        <div className=\"prompt-bubble\">\r\n          {promptOptions.map((prompt, index) => (\r\n            <button\r\n              key={index}\r\n              onClick={() => {\r\n                setInput(prompt);\r\n                sendMessageWithPrompt(prompt);\r\n              }}\r\n              disabled={loading}\r\n            >\r\n              {prompt}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {messages.map((msg, index) => (\r\n          <div key={index} className={`message ${msg.role}`}>\r\n            {msg.role === \"assistant\" ? (\r\n              <div className={msg.typing ? \"typing\" : \"\"}>\r\n                {msg.typing ? (\r\n                  <div className=\"typing-indicator\">\r\n                    <span>.</span><span>.</span><span>.</span>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <ReactMarkdown>{msg.content}</ReactMarkdown>\r\n                    {msg.source && (\r\n                      <div className=\"source-tag\">\r\n                        Source: {msg.source}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"user-message\">{msg.content}</div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div ref={chatEndRef} />\r\n      </div>\r\n\r\n      <div className=\"input-area\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Ask the Assistant about jobs, training programs, or how to apply...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          disabled={loading}\r\n        />\r\n        <button onClick={sendMessage} disabled={loading}>\r\n          {loading ? \"Sending...\" : \"Send\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"chat-actions\">\r\n        <button className=\"clear-btn\" onClick={clearChat} disabled={loading}>\r\n          Clear Chat\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}